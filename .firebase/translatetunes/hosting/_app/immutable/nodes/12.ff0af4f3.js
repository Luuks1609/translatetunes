import{s as Oe,g as v,h as y,i as k,k as P,c as U,l as F,d as I,m as H,w as le,f as Vt,K as Bt,A as Ne,C as qe,F as Mt,e as ft,B as Nt,j as dt,v as Ge,r as Je,o as Ye,x as qt}from"../chunks/scheduler.635b56cd.js";import{S as xe,i as Ae,d as z,v as Te,e as p,g as b,a as N,h as Fe,t as x,c as He,b as M,j as ee,k as te,m as oe,n as h,s as J,l as ne,A as Ot,p as ht,q as Qe,o as xt}from"../chunks/index.1e81eea3.js";import{g as At}from"../chunks/globals.7f7f1b26.js";import{N as bt}from"../chunks/Navigation.acb20dfd.js";import{I as ve}from"../chunks/Icon.20649865.js";import{i as mt,e as we,u as Ue,j as gt,c as Ie,d as Re,f as Ke,g as Ce,q as je,w as Ve,a as Be,b as Tt}from"../chunks/firebase.a6fa023d.js";import{M as vt}from"../chunks/Modal.6c353d5e.js";import{s as Le}from"../chunks/spotifyStore.cc39e0ec.js";import{c as wt,f as Ft}from"../chunks/utils.808755f5.js";import{a as yt}from"../chunks/index.5a91c927.js";const fe="src/lib/components/UI/ProfileStatistic.svelte";function Pt(o){let e,t,s,r,d,a,i,u,l;e=new ve({props:{icon:o[0],class:o[3],height:"24"},$$inline:!0});const f={c:function(){ee(e.$$.fragment),t=U(),s=v("span"),r=v("p"),d=F(o[1]),a=U(),i=v("p"),u=F(o[2]),this.h()},l:function(g){te(e.$$.fragment,g),t=I(g),s=y(g,"SPAN",{});var m=k(s);r=y(m,"P",{class:!0});var c=k(r);d=H(c,o[1]),c.forEach(p),a=I(m),i=y(m,"P",{class:!0});var _=k(i);u=H(_,o[2]),_.forEach(p),m.forEach(p),this.h()},h:function(){b(r,"class","font-semibold tracking-wider text-lg"),P(r,fe,22,3,584),b(i,"class","-mt-1 text-gray-500 font-medium text-sm"),P(i,fe,23,3,651),P(s,fe,21,2,574)},m:function(g,m){oe(e,g,m),N(g,t,m),N(g,s,m),h(s,r),h(r,d),h(s,a),h(s,i),h(i,u),l=!0},p:function(g,m){const c={};m&1&&(c.icon=g[0]),m&8&&(c.class=g[3]),e.$set(c),(!l||m&2)&&J(d,g[1]),(!l||m&4)&&J(u,g[2])},i:function(g){l||(M(e.$$.fragment,g),l=!0)},o:function(g){x(e.$$.fragment,g),l=!1},d:function(g){g&&(p(t),p(s)),ne(e,g)}};return z("SvelteRegisterBlock",{block:f,id:Pt.name,type:"else",source:"(20:1) {:else}",ctx:o}),f}function Et(o){let e,t,s,r,d,a;const i={c:function(){e=v("div"),t=U(),s=v("div"),r=v("div"),d=U(),a=v("div"),this.h()},l:function(l){e=y(l,"DIV",{class:!0}),k(e).forEach(p),t=I(l),s=y(l,"DIV",{class:!0});var f=k(s);r=y(f,"DIV",{class:!0}),k(r).forEach(p),d=I(f),a=y(f,"DIV",{class:!0}),k(a).forEach(p),f.forEach(p),this.h()},h:function(){b(e,"class","w-24 h-4 bg-gray-500 rounded-full animate-pulse"),P(e,fe,14,2,298),b(r,"class","w-16 h-4 bg-gray-500 mb-1 rounded-full"),P(r,fe,16,3,402),b(a,"class","w-32 h-4 bg-gray-500 rounded-full"),P(a,fe,17,3,460),b(s,"class","flex-1 animate-pulse"),P(s,fe,15,2,364)},m:function(l,f){N(l,e,f),N(l,t,f),N(l,s,f),h(s,r),h(s,d),h(s,a)},p:le,i:le,o:le,d:function(l){l&&(p(e),p(t),p(s))}};return z("SvelteRegisterBlock",{block:i,id:Et.name,type:"if",source:"(14:1) {#if isLoading}",ctx:o}),i}function We(o){let e,t,s,r;const d=[Et,Pt],a=[];function i(l,f){return l[4]?0:1}t=i(o),s=a[t]=d[t](o);const u={c:function(){e=v("div"),s.c(),this.h()},l:function(f){e=y(f,"DIV",{class:!0});var n=k(e);s.l(n),n.forEach(p),this.h()},h:function(){b(e,"class","flex gap-2 items-start bg-dark-gray border-2 border-b-4 border-gray-700 rounded-lg w-1/2 py-2 px-5"),P(e,fe,10,0,164)},m:function(f,n){N(f,e,n),a[t].m(e,null),r=!0},p:function(f,[n]){let g=t;t=i(f),t===g?a[t].p(f,n):(Fe(),x(a[g],1,1,()=>{a[g]=null}),He(),s=a[t],s?s.p(f,n):(s=a[t]=d[t](f),s.c()),M(s,1),s.m(e,null))},i:function(f){r||(M(s),r=!0)},o:function(f){x(s),r=!1},d:function(f){f&&p(e),a[t].d()}};return z("SvelteRegisterBlock",{block:u,id:We.name,type:"component",source:"",ctx:o}),u}function Ht(o,e,t){let{$$slots:s={},$$scope:r}=e;Te("ProfileStatistic",s,[]);let{icon:d}=e,{statistic:a=0}=e,{title:i}=e,{color:u}=e,{isLoading:l}=e;o.$$.on_mount.push(function(){d===void 0&&!("icon"in e||o.$$.bound[o.$$.props.icon])&&console.warn("<ProfileStatistic> was created without expected prop 'icon'"),i===void 0&&!("title"in e||o.$$.bound[o.$$.props.title])&&console.warn("<ProfileStatistic> was created without expected prop 'title'"),u===void 0&&!("color"in e||o.$$.bound[o.$$.props.color])&&console.warn("<ProfileStatistic> was created without expected prop 'color'"),l===void 0&&!("isLoading"in e||o.$$.bound[o.$$.props.isLoading])&&console.warn("<ProfileStatistic> was created without expected prop 'isLoading'")});const f=["icon","statistic","title","color","isLoading"];return Object.keys(e).forEach(n=>{!~f.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&console.warn(`<ProfileStatistic> was created with unknown prop '${n}'`)}),o.$$set=n=>{"icon"in n&&t(0,d=n.icon),"statistic"in n&&t(1,a=n.statistic),"title"in n&&t(2,i=n.title),"color"in n&&t(3,u=n.color),"isLoading"in n&&t(4,l=n.isLoading)},o.$capture_state=()=>({Icon:ve,icon:d,statistic:a,title:i,color:u,isLoading:l}),o.$inject_state=n=>{"icon"in n&&t(0,d=n.icon),"statistic"in n&&t(1,a=n.statistic),"title"in n&&t(2,i=n.title),"color"in n&&t(3,u=n.color),"isLoading"in n&&t(4,l=n.isLoading)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[d,a,i,u,l]}class Xe extends xe{constructor(e){super(e),Ae(this,e,Ht,We,Oe,{icon:0,statistic:1,title:2,color:3,isLoading:4}),z("SvelteRegisterComponent",{component:this,tagName:"ProfileStatistic",options:e,id:We.name})}get icon(){throw new Error("<ProfileStatistic>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set icon(e){throw new Error("<ProfileStatistic>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get statistic(){throw new Error("<ProfileStatistic>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set statistic(e){throw new Error("<ProfileStatistic>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get title(){throw new Error("<ProfileStatistic>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set title(e){throw new Error("<ProfileStatistic>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get color(){throw new Error("<ProfileStatistic>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set color(e){throw new Error("<ProfileStatistic>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isLoading(){throw new Error("<ProfileStatistic>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isLoading(e){throw new Error("<ProfileStatistic>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const D="src/lib/components/UI/UserProfile.svelte";function pt(o,e,t){const s=o.slice();return s[18]=e[t],s}function kt(o){var rt,it;let e,t,s,r,d,a,i,u,l,f,n,g,m=(((rt=o[2])==null?void 0:rt.length)||0)+"",c,_,S,C="followers",V,q,O,j=(((it=o[3])==null?void 0:it.length)||0)+"",A,G,w,$="following",Q,R,E,L,B,de,ce=new Date(o[4]).toLocaleDateString("en",{year:"numeric",month:"long"})+"",he,pe,W,me,_e,re,Y,K,X,be,ye;E=new ve({props:{icon:"bi:clock-fill",class:"text-gray-500",height:"16"},$$inline:!0});const ot=[Lt,Dt],ge=[];function nt(ae,T){return ae[7]?0:1}Y=nt(o),K=ge[Y]=ot[Y](o);const st={c:function(){e=v("div"),t=v("div"),s=v("div"),r=v("p"),d=F(o[0]),a=U(),i=v("p"),u=F(o[1]),l=U(),f=v("div"),n=v("div"),g=v("p"),c=F(m),_=U(),S=v("p"),S.textContent=C,V=U(),q=v("div"),O=v("p"),A=F(j),G=U(),w=v("p"),w.textContent=$,Q=U(),R=v("div"),ee(E.$$.fragment),L=U(),B=v("p"),de=F("Joined "),he=F(ce),pe=U(),W=v("img"),_e=U(),re=v("div"),K.c(),this.h()},l:function(T){e=y(T,"DIV",{class:!0});var Z=k(e);t=y(Z,"DIV",{class:!0});var ue=k(t);s=y(ue,"DIV",{class:!0});var se=k(s);r=y(se,"P",{class:!0});var Pe=k(r);d=H(Pe,o[0]),Pe.forEach(p),a=I(se),i=y(se,"P",{class:!0});var lt=k(i);u=H(lt,o[1]),lt.forEach(p),l=I(se),f=y(se,"DIV",{class:!0});var Ee=k(f);n=y(Ee,"DIV",{class:!0});var ke=k(n);g=y(ke,"P",{class:!0});var ct=k(g);c=H(ct,m),ct.forEach(p),_=I(ke),S=y(ke,"P",{class:!0,"data-svelte-h":!0}),Ne(S)!=="svelte-1yib3xq"&&(S.textContent=C),ke.forEach(p),V=I(Ee),q=y(Ee,"DIV",{class:!0});var Se=k(q);O=y(Se,"P",{class:!0});var at=k(O);A=H(at,j),at.forEach(p),G=I(Se),w=y(Se,"P",{class:!0,"data-svelte-h":!0}),Ne(w)!=="svelte-44nyci"&&(w.textContent=$),Se.forEach(p),Ee.forEach(p),Q=I(se),R=y(se,"DIV",{class:!0});var De=k(R);te(E.$$.fragment,De),L=I(De),B=y(De,"P",{class:!0});var ze=k(B);de=H(ze,"Joined "),he=H(ze,ce),ze.forEach(p),De.forEach(p),se.forEach(p),pe=I(ue),W=y(ue,"IMG",{src:!0,class:!0,alt:!0}),ue.forEach(p),_e=I(Z),re=y(Z,"DIV",{});var ut=k(re);K.l(ut),ut.forEach(p),Z.forEach(p),this.h()},h:function(){b(r,"class","text-3xl font-bold"),P(r,D,84,4,2292),b(i,"class","text-gray-400"),P(i,D,87,4,2352),b(g,"class","text-xl font-bold"),P(g,D,92,6,2515),b(S,"class","text-gray-400"),P(S,D,93,6,2579),b(n,"class","flex flex-col"),P(n,D,91,5,2439),b(O,"class","text-xl font-bold"),P(O,D,96,6,2711),b(w,"class","text-gray-400"),P(w,D,97,6,2775),b(q,"class","flex flex-col"),P(q,D,95,5,2635),b(f,"class","flex gap-5 my-5"),P(f,D,90,4,2404),b(B,"class","text-gray-400 capitalize"),P(B,D,102,5,2953),b(R,"class","flex gap-2 items-center"),P(R,D,100,4,2841),b(s,"class",""),P(s,D,83,3,2273),qe(W.src,me=o[5])||b(W,"src",me),b(W,"class","h-32 w-32 rounded-full"),b(W,"alt",""),P(W,D,110,3,3143),b(t,"class","flex justify-between items-center"),P(t,D,82,2,2222),P(re,D,113,2,3218),b(e,"class","border-b border-gray-700 pb-10"),P(e,D,81,1,2175)},m:function(T,Z){N(T,e,Z),h(e,t),h(t,s),h(s,r),h(r,d),h(s,a),h(s,i),h(i,u),h(s,l),h(s,f),h(f,n),h(n,g),h(g,c),h(n,_),h(n,S),h(f,V),h(f,q),h(q,O),h(O,A),h(q,G),h(q,w),h(s,Q),h(s,R),oe(E,R,null),h(R,L),h(R,B),h(B,de),h(B,he),h(t,pe),h(t,W),h(e,_e),h(e,re),ge[Y].m(re,null),X=!0,be||(ye=[Qe(n,"click",o[12],!1,!1,!1,!1),Qe(q,"click",o[13],!1,!1,!1,!1)],be=!0)},p:function(T,Z){var se,Pe;(!X||Z&1)&&J(d,T[0]),(!X||Z&2)&&J(u,T[1]),(!X||Z&4)&&m!==(m=(((se=T[2])==null?void 0:se.length)||0)+"")&&J(c,m),(!X||Z&8)&&j!==(j=(((Pe=T[3])==null?void 0:Pe.length)||0)+"")&&J(A,j),(!X||Z&16)&&ce!==(ce=new Date(T[4]).toLocaleDateString("en",{year:"numeric",month:"long"})+"")&&J(he,ce),(!X||Z&32&&!qe(W.src,me=T[5]))&&b(W,"src",me);let ue=Y;Y=nt(T),Y!==ue&&(Fe(),x(ge[ue],1,1,()=>{ge[ue]=null}),He(),K=ge[Y],K||(K=ge[Y]=ot[Y](T),K.c()),M(K,1),K.m(re,null))},i:function(T){X||(M(E.$$.fragment,T),M(K),X=!0)},o:function(T){x(E.$$.fragment,T),x(K),X=!1},d:function(T){T&&p(e),ne(E),ge[Y].d(),be=!1,Mt(ye)}};return z("SvelteRegisterBlock",{block:st,id:kt.name,type:"else",source:"(81:0) {:else}",ctx:o}),st}function St(o){let e,t,s,r,d,a,i;const u={c:function(){e=v("div"),t=v("div"),s=v("div"),r=U(),d=v("div"),a=U(),i=v("div"),this.h()},l:function(f){e=y(f,"DIV",{class:!0});var n=k(e);t=y(n,"DIV",{class:!0});var g=k(t);s=y(g,"DIV",{class:!0}),k(s).forEach(p),r=I(g),d=y(g,"DIV",{class:!0}),k(d).forEach(p),g.forEach(p),a=I(n),i=y(n,"DIV",{class:!0}),k(i).forEach(p),n.forEach(p),this.h()},h:function(){b(s,"class","h-2.5 bg-gray-200 rounded-full dark:bg-gray-700 w-48 mb-4"),P(s,D,75,3,1928),b(d,"class","h-2 bg-gray-200 rounded-full dark:bg-gray-700 w-32 mb-2.5"),P(d,D,76,3,2005),b(t,"class",""),P(t,D,74,2,1910),b(i,"class","h-32 w-32 rounded-full bg-gray-300 dark:bg-gray-700"),P(i,D,78,2,2090),b(e,"class","animate-pulse flex justify-between items-center"),P(e,D,73,1,1846)},m:function(f,n){N(f,e,n),h(e,t),h(t,s),h(t,r),h(t,d),h(e,a),h(e,i)},p:le,i:le,o:le,d:function(f){f&&p(e)}};return z("SvelteRegisterBlock",{block:u,id:St.name,type:"if",source:"(73:0) {#if isLoading}",ctx:o}),u}function Dt(o){let e,t,s="Add friends",r,d,a,i,u,l;a=new ve({props:{icon:"bi:box-arrow-in-left",class:"text-white",height:32},$$inline:!0});const f={c:function(){e=v("div"),t=v("button"),t.textContent=s,r=U(),d=v("button"),ee(a.$$.fragment),this.h()},l:function(g){e=y(g,"DIV",{class:!0});var m=k(e);t=y(m,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(t)!=="svelte-324rxy"&&(t.textContent=s),r=I(m),d=y(m,"BUTTON",{class:!0});var c=k(d);te(a.$$.fragment,c),c.forEach(p),m.forEach(p),this.h()},h:function(){b(t,"class","bg-blue-400 text-white font-semibold py-2 px-4 mt-10 w-full rounded-md shadow-md transition duration-300 ease-in-out border-b-4 border-blue-500"),P(t,D,121,5,3482),b(d,"class","bg-blue-400 flex justify-center text-white font-semibold py-2 px-4 mt-10 w-1/3 rounded-md shadow-md transition duration-300 ease-in-out border-b-4 border-blue-500"),P(d,D,125,5,3687),b(e,"class","flex gap-2"),P(e,D,120,4,3452)},m:function(g,m){N(g,e,m),h(e,t),h(e,r),h(e,d),oe(a,d,null),i=!0,u||(l=Qe(d,"click",o[14],!1,!1,!1,!1),u=!0)},i:function(g){i||(M(a.$$.fragment,g),i=!0)},o:function(g){x(a.$$.fragment,g),i=!1},d:function(g){g&&p(e),ne(a),u=!1,l()}};return z("SvelteRegisterBlock",{block:f,id:Dt.name,type:"else",source:"(120:3) {:else}",ctx:o}),f}function Lt(o){let e,t="Follow";const s={c:function(){e=v("button"),e.textContent=t,this.h()},l:function(d){e=y(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(e)!=="svelte-103nn80"&&(e.textContent=t),this.h()},h:function(){b(e,"class","bg-blue-400 text-white font-semibold py-2 px-4 mt-10 w-full rounded-md shadow-mdtransition duration-300 ease-in-out border-b-4 border-blue-500"),P(e,D,115,4,3246)},m:function(d,a){N(d,e,a)},i:le,o:le,d:function(d){d&&p(e)}};return z("SvelteRegisterBlock",{block:s,id:Lt.name,type:"if",source:"(115:3) {#if stranger}",ctx:o}),s}function Ze(o){let e,t,s,r,d,a,i,u=o[18].username+"",l,f,n,g,m,c,_=o[18].score+"",S,C,V;g=new ve({props:{icon:"fluent-emoji:gem-stone",class:"text-blue-400",height:"24"},$$inline:!0});const q={c:function(){e=v("div"),t=v("div"),s=v("img"),d=U(),a=v("div"),i=v("p"),l=F(u),f=U(),n=v("div"),ee(g.$$.fragment),m=U(),c=v("p"),S=F(_),C=U(),this.h()},l:function(j){e=y(j,"DIV",{class:!0});var A=k(e);t=y(A,"DIV",{class:!0});var G=k(t);s=y(G,"IMG",{src:!0,class:!0,alt:!0}),d=I(G),a=y(G,"DIV",{class:!0});var w=k(a);i=y(w,"P",{class:!0});var $=k(i);l=H($,u),$.forEach(p),f=I(w),n=y(w,"DIV",{class:!0});var Q=k(n);te(g.$$.fragment,Q),m=I(Q),c=y(Q,"P",{class:!0});var R=k(c);S=H(R,_),R.forEach(p),Q.forEach(p),w.forEach(p),G.forEach(p),C=I(A),A.forEach(p),this.h()},h:function(){var j;qe(s.src,r=(j=o[18])==null?void 0:j.avatar)||b(s,"src",r),b(s,"class","rounded-full h-12"),b(s,"alt",""),P(s,D,147,4,4335),b(i,"class","font-semibold"),P(i,D,149,5,4436),b(c,"class","font-semibold"),P(c,D,152,6,4600),b(n,"class","flex gap-2"),P(n,D,150,5,4490),b(a,"class","flex flex-col"),P(a,D,148,4,4403),b(t,"class","flex items-center gap-3"),P(t,D,146,3,4293),b(e,"class","flex px-1 py-2 items-center w-full border-b border-gray-800 rounded mb-2 pb-2"),P(e,D,145,2,4198)},m:function(j,A){N(j,e,A),h(e,t),h(t,s),h(t,d),h(t,a),h(a,i),h(i,l),h(a,f),h(a,n),oe(g,n,null),h(n,m),h(n,c),h(c,S),h(e,C),V=!0},p:function(j,A){var G;(!V||A&1024&&!qe(s.src,r=(G=j[18])==null?void 0:G.avatar))&&b(s,"src",r),(!V||A&1024)&&u!==(u=j[18].username+"")&&J(l,u),(!V||A&1024)&&_!==(_=j[18].score+"")&&J(S,_)},i:function(j){V||(M(g.$$.fragment,j),V=!0)},o:function(j){x(g.$$.fragment,j),V=!1},d:function(j){j&&p(e),ne(g)}};return z("SvelteRegisterBlock",{block:q,id:Ze.name,type:"each",source:"(145:1) {#each data as follower}",ctx:o}),q}function Ut(o){let e,t,s=ht(o[10]),r=[];for(let i=0;i<s.length;i+=1)r[i]=Ze(pt(o,s,i));const d=i=>x(r[i],1,1,()=>{r[i]=null}),a={c:function(){for(let u=0;u<r.length;u+=1)r[u].c();e=ft()},l:function(u){for(let l=0;l<r.length;l+=1)r[l].l(u);e=ft()},m:function(u,l){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(u,l);N(u,e,l),t=!0},p:function(u,l){if(l&1024){s=ht(u[10]);let f;for(f=0;f<s.length;f+=1){const n=pt(u,s,f);r[f]?(r[f].p(n,l),M(r[f],1)):(r[f]=Ze(n),r[f].c(),M(r[f],1),r[f].m(e.parentNode,e))}for(Fe(),f=s.length;f<r.length;f+=1)d(f);He()}},i:function(u){if(!t){for(let l=0;l<s.length;l+=1)M(r[l]);t=!0}},o:function(u){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)x(r[l]);t=!1},d:function(u){u&&p(e),Nt(r,u)}};return z("SvelteRegisterBlock",{block:a,id:Ut.name,type:"slot",source:"(138:0) <Modal bind:showModal>",ctx:o}),a}function It(o){let e,t,s;const r={c:function(){e=v("h2"),t=v("p"),s=F(o[9]),this.h()},l:function(a){e=y(a,"H2",{slot:!0});var i=k(e);t=y(i,"P",{class:!0});var u=k(t);s=H(u,o[9]),u.forEach(p),i.forEach(p),this.h()},h:function(){b(t,"class","capitalize text-xl font-bold"),P(t,D,139,2,4099),b(e,"slot","header"),P(e,D,138,1,4078)},m:function(a,i){N(a,e,i),h(e,t),h(t,s)},p:function(a,i){i&512&&J(s,a[9])},d:function(a){a&&p(e)}};return z("SvelteRegisterBlock",{block:r,id:It.name,type:"slot",source:"(139:1) ",ctx:o}),r}function $e(o){let e,t,s,r,d,a;const i=[St,kt],u=[];function l(m,c){return m[6]?0:1}e=l(o),t=u[e]=i[e](o);function f(m){o[15](m)}let n={$$slots:{header:[It],default:[Ut]},$$scope:{ctx:o}};o[8]!==void 0&&(n.showModal=o[8]),r=new vt({props:n,$$inline:!0}),Vt.push(()=>Ot(r,"showModal",f));const g={c:function(){t.c(),s=U(),ee(r.$$.fragment)},l:function(c){t.l(c),s=I(c),te(r.$$.fragment,c)},m:function(c,_){u[e].m(c,_),N(c,s,_),oe(r,c,_),a=!0},p:function(c,[_]){let S=e;e=l(c),e===S?u[e].p(c,_):(Fe(),x(u[S],1,1,()=>{u[S]=null}),He(),t=u[e],t?t.p(c,_):(t=u[e]=i[e](c),t.c()),M(t,1),t.m(s.parentNode,s));const C={};_&2098688&&(C.$$scope={dirty:_,ctx:c}),!d&&_&256&&(d=!0,C.showModal=c[8],Bt(()=>d=!1)),r.$set(C)},i:function(c){a||(M(t),M(r.$$.fragment,c),a=!0)},o:function(c){x(t),x(r.$$.fragment,c),a=!1},d:function(c){c&&p(s),u[e].d(c),ne(r,c)}};return z("SvelteRegisterBlock",{block:g,id:$e.name,type:"component",source:"",ctx:o}),g}function zt(o,e,t){let{$$slots:s={},$$scope:r}=e;Te("UserProfile",s,[]);let{username:d}=e,{email:a}=e,{followers:i=[]}=e,{following:u=[]}=e,{creationDate:l}=e,{pictureURL:f}=e,{isLoading:n}=e,{stranger:g}=e,m=!1,c,_=[];const S=w=>{w==="followers"&&i.length===0||w==="following"&&u.length===0||(t(9,c=w),t(8,m=!m),c==="followers"?C():c==="following"&&V())},C=async()=>{t(10,_=[]);for(const w of i){const $=Re(we,"users",w),R=(await Ke($)).data();_.push({userId:w,username:R.username,avatar:R.avatar,score:R.score})}t(10,_)},V=async()=>{t(10,_=[]);for(const w of u){const $=Re(we,"users",w),R=(await Ke($)).data();_.push({userId:w,username:R.username,avatar:R.avatar,score:R.score})}t(10,_)};o.$$.on_mount.push(function(){d===void 0&&!("username"in e||o.$$.bound[o.$$.props.username])&&console.warn("<UserProfile> was created without expected prop 'username'"),a===void 0&&!("email"in e||o.$$.bound[o.$$.props.email])&&console.warn("<UserProfile> was created without expected prop 'email'"),l===void 0&&!("creationDate"in e||o.$$.bound[o.$$.props.creationDate])&&console.warn("<UserProfile> was created without expected prop 'creationDate'"),f===void 0&&!("pictureURL"in e||o.$$.bound[o.$$.props.pictureURL])&&console.warn("<UserProfile> was created without expected prop 'pictureURL'"),n===void 0&&!("isLoading"in e||o.$$.bound[o.$$.props.isLoading])&&console.warn("<UserProfile> was created without expected prop 'isLoading'"),g===void 0&&!("stranger"in e||o.$$.bound[o.$$.props.stranger])&&console.warn("<UserProfile> was created without expected prop 'stranger'")});const q=["username","email","followers","following","creationDate","pictureURL","isLoading","stranger"];Object.keys(e).forEach(w=>{!~q.indexOf(w)&&w.slice(0,2)!=="$$"&&w!=="slot"&&console.warn(`<UserProfile> was created with unknown prop '${w}'`)});const O=()=>S("followers"),j=()=>S("following"),A=()=>{gt(mt)};function G(w){m=w,t(8,m)}return o.$$set=w=>{"username"in w&&t(0,d=w.username),"email"in w&&t(1,a=w.email),"followers"in w&&t(2,i=w.followers),"following"in w&&t(3,u=w.following),"creationDate"in w&&t(4,l=w.creationDate),"pictureURL"in w&&t(5,f=w.pictureURL),"isLoading"in w&&t(6,n=w.isLoading),"stranger"in w&&t(7,g=w.stranger)},o.$capture_state=()=>({auth:mt,db:we,userData:Ue,Icon:ve,signOut:gt,Modal:vt,collection:Ie,doc:Re,getDoc:Ke,getDocs:Ce,query:je,where:Ve,username:d,email:a,followers:i,following:u,creationDate:l,pictureURL:f,isLoading:n,stranger:g,showModal:m,modalMode:c,data:_,toggleModal:S,fetchFollowers:C,fetchFollowing:V}),o.$inject_state=w=>{"username"in w&&t(0,d=w.username),"email"in w&&t(1,a=w.email),"followers"in w&&t(2,i=w.followers),"following"in w&&t(3,u=w.following),"creationDate"in w&&t(4,l=w.creationDate),"pictureURL"in w&&t(5,f=w.pictureURL),"isLoading"in w&&t(6,n=w.isLoading),"stranger"in w&&t(7,g=w.stranger),"showModal"in w&&t(8,m=w.showModal),"modalMode"in w&&t(9,c=w.modalMode),"data"in w&&t(10,_=w.data)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[d,a,i,u,l,f,n,g,m,c,_,S,O,j,A,G]}class Rt extends xe{constructor(e){super(e),Ae(this,e,zt,$e,Oe,{username:0,email:1,followers:2,following:3,creationDate:4,pictureURL:5,isLoading:6,stranger:7}),z("SvelteRegisterComponent",{component:this,tagName:"UserProfile",options:e,id:$e.name})}get username(){throw new Error("<UserProfile>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set username(e){throw new Error("<UserProfile>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get email(){throw new Error("<UserProfile>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set email(e){throw new Error("<UserProfile>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get followers(){throw new Error("<UserProfile>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set followers(e){throw new Error("<UserProfile>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get following(){throw new Error("<UserProfile>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set following(e){throw new Error("<UserProfile>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get creationDate(){throw new Error("<UserProfile>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set creationDate(e){throw new Error("<UserProfile>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pictureURL(){throw new Error("<UserProfile>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pictureURL(e){throw new Error("<UserProfile>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get isLoading(){throw new Error("<UserProfile>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isLoading(e){throw new Error("<UserProfile>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get stranger(){throw new Error("<UserProfile>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set stranger(e){throw new Error("<UserProfile>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ie="src/lib/components/Challenge.svelte";function Ct(o){let e,t,s,r;const d={c:function(){e=v("p"),t=F("You have reached "),s=F(o[2]),r=F("!"),this.h()},l:function(i){e=y(i,"P",{class:!0});var u=k(e);t=H(u,"You have reached "),s=H(u,o[2]),r=H(u,"!"),u.forEach(p),this.h()},h:function(){b(e,"class","font-light mt-2"),P(e,ie,34,2,1211)},m:function(i,u){N(i,e,u),h(e,t),h(e,s),h(e,r)},p:function(i,u){u&4&&J(s,i[2])},d:function(i){i&&p(e)}};return z("SvelteRegisterBlock",{block:d,id:Ct.name,type:"else",source:"(34:1) {:else}",ctx:o}),d}function jt(o){let e,t,s,r,d,a,i,u,l,f;const n={c:function(){e=v("div"),t=v("div"),s=v("span"),r=F(o[3]),d=F(" of "),a=v("span"),i=F(o[2]),u=U(),l=v("div"),f=v("div"),this.h()},l:function(m){e=y(m,"DIV",{class:!0});var c=k(e);t=y(c,"DIV",{class:!0});var _=k(t);s=y(_,"SPAN",{});var S=k(s);r=H(S,o[3]),S.forEach(p),d=H(_," of "),a=y(_,"SPAN",{});var C=k(a);i=H(C,o[2]),C.forEach(p),_.forEach(p),c.forEach(p),u=I(m),l=y(m,"DIV",{class:!0});var V=k(l);f=y(V,"DIV",{style:!0,class:!0}),k(f).forEach(p),V.forEach(p),this.h()},h:function(){P(s,ie,23,4,868),P(a,ie,23,31,895),b(t,"class","text-white mb-1"),P(t,ie,22,3,834),b(e,"class","flex items-center justify-between mt-3"),P(e,ie,21,2,778),dt(f,"width",o[4]+"%"),b(f,"class","shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-yellow-400 rounded-lg"),P(f,ie,28,3,1017),b(l,"class","overflow-hidden h-4 mb-4 text-xs flex rounded-lg bg-gray-600"),P(l,ie,27,2,939)},m:function(m,c){N(m,e,c),h(e,t),h(t,s),h(s,r),h(t,d),h(t,a),h(a,i),N(m,u,c),N(m,l,c),h(l,f)},p:function(m,c){c&8&&J(r,m[3]),c&4&&J(i,m[2]),c&16&&dt(f,"width",m[4]+"%")},d:function(m){m&&(p(e),p(u),p(l))}};return z("SvelteRegisterBlock",{block:n,id:jt.name,type:"if",source:"(21:1) {#if completionPercentage !== 100}",ctx:o}),n}function et(o){let e,t,s,r,d,a,i,u;function l(m,c){return m[4]!==100?jt:Ct}let f=l(o),n=f(o);const g={c:function(){e=v("div"),t=v("h3"),s=F(o[0]),d=U(),a=v("h3"),i=F(o[1]),u=U(),n.c(),this.h()},l:function(c){e=y(c,"DIV",{class:!0});var _=k(e);t=y(_,"H3",{class:!0});var S=k(t);s=H(S,o[0]),S.forEach(p),d=I(_),a=y(_,"H3",{class:!0});var C=k(a);i=H(C,o[1]),C.forEach(p),u=I(_),n.l(_),_.forEach(p),this.h()},h:function(){b(t,"class",r="text-xl font-semibold "+(o[4]===100&&"text-yellow-400")),P(t,ie,16,1,591),b(a,"class","font-medium"),P(a,ie,19,1,697),b(e,"class","bg-dark-gray font-semibold my-3 py-2 px-4 w-full rounded-md border-b-4 border-2 border-gray-700"),P(e,ie,13,0,478)},m:function(c,_){N(c,e,_),h(e,t),h(t,s),h(e,d),h(e,a),h(a,i),h(e,u),n.m(e,null)},p:function(c,[_]){_&1&&J(s,c[0]),_&16&&r!==(r="text-xl font-semibold "+(c[4]===100&&"text-yellow-400"))&&b(t,"class",r),_&2&&J(i,c[1]),f===(f=l(c))&&n?n.p(c,_):(n.d(1),n=f(c),n&&(n.c(),n.m(e,null)))},i:le,o:le,d:function(c){c&&p(e),n.d()}};return z("SvelteRegisterBlock",{block:g,id:et.name,type:"component",source:"",ctx:o}),g}function Gt(o,e,t){let s,{$$slots:r={},$$scope:d}=e;Te("Challenge",r,[]);let{title:a}=e,{description:i}=e,{target:u}=e,{progress:l}=e;o.$$.on_mount.push(function(){a===void 0&&!("title"in e||o.$$.bound[o.$$.props.title])&&console.warn("<Challenge> was created without expected prop 'title'"),i===void 0&&!("description"in e||o.$$.bound[o.$$.props.description])&&console.warn("<Challenge> was created without expected prop 'description'"),u===void 0&&!("target"in e||o.$$.bound[o.$$.props.target])&&console.warn("<Challenge> was created without expected prop 'target'"),l===void 0&&!("progress"in e||o.$$.bound[o.$$.props.progress])&&console.warn("<Challenge> was created without expected prop 'progress'")});const f=["title","description","target","progress"];return Object.keys(e).forEach(n=>{!~f.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&console.warn(`<Challenge> was created with unknown prop '${n}'`)}),o.$$set=n=>{"title"in n&&t(0,a=n.title),"description"in n&&t(1,i=n.description),"target"in n&&t(2,u=n.target),"progress"in n&&t(3,l=n.progress)},o.$capture_state=()=>({db:we,user:Be,doc:Re,updateDoc:Tt,title:a,description:i,target:u,progress:l,completionPercentage:s}),o.$inject_state=n=>{"title"in n&&t(0,a=n.title),"description"in n&&t(1,i=n.description),"target"in n&&t(2,u=n.target),"progress"in n&&t(3,l=n.progress),"completionPercentage"in n&&t(4,s=n.completionPercentage)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&12&&t(4,s=parseInt(l)/parseInt(u)*100)},[a,i,u,l,s]}class Me extends xe{constructor(e){super(e),Ae(this,e,Gt,et,Oe,{title:0,description:1,target:2,progress:3}),z("SvelteRegisterComponent",{component:this,tagName:"Challenge",options:e,id:et.name})}get title(){throw new Error("<Challenge>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set title(e){throw new Error("<Challenge>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get description(){throw new Error("<Challenge>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set description(e){throw new Error("<Challenge>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get target(){throw new Error("<Challenge>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set target(e){throw new Error("<Challenge>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get progress(){throw new Error("<Challenge>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set progress(e){throw new Error("<Challenge>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Jt}=At,_t="src/routes/(protected)/profile/+page.svelte";function tt(o){var q,O,j,A,G,w,$,Q;let e,t,s,r,d,a,i,u,l,f,n,g,m,c,_,S,C;t=new Rt({props:{username:(q=o[4])==null?void 0:q.display_name,email:(O=o[4])==null?void 0:O.email,creationDate:(j=o[3])==null?void 0:j.metadata.creationTime,pictureURL:(A=o[4])==null?void 0:A.images[1].url,stranger:!1,followers:(G=o[5])==null?void 0:G.followers,following:(w=o[5])==null?void 0:w.following,isLoading:o[0]},$$inline:!0}),d=new Xe({props:{icon:"bi:star-fill",color:"text-yellow-400",statistic:o[1],title:"Stars Acquired",isLoading:o[0]},$$inline:!0}),i=new Xe({props:{icon:"fluent-emoji:gem-stone",color:"text-blue-400",statistic:($=o[5])==null?void 0:$.score,title:"Diamonds earned",isLoading:o[0]},$$inline:!0}),l=new Me({props:{title:"Star Collector",description:"Acquire 50 stars",target:"50 stars",progress:o[1]},$$inline:!0}),n=new Me({props:{title:"Diamond Specialist",description:"Collect 1000 diamonds",target:"1000 diamonds",progress:(Q=o[5])==null?void 0:Q.score},$$inline:!0}),m=new Me({props:{title:"Music Lover",description:"Play 50 songs",target:"50 songs",progress:o[2]},$$inline:!0}),S=new bt({$$inline:!0});const V={c:function(){e=v("div"),ee(t.$$.fragment),s=U(),r=v("div"),ee(d.$$.fragment),a=U(),ee(i.$$.fragment),u=U(),ee(l.$$.fragment),f=U(),ee(n.$$.fragment),g=U(),ee(m.$$.fragment),_=U(),ee(S.$$.fragment),this.h()},l:function(E){e=y(E,"DIV",{class:!0});var L=k(e);te(t.$$.fragment,L),s=I(L),r=y(L,"DIV",{class:!0});var B=k(r);te(d.$$.fragment,B),a=I(B),te(i.$$.fragment,B),B.forEach(p),u=I(L),te(l.$$.fragment,L),f=I(L),te(n.$$.fragment,L),g=I(L),te(m.$$.fragment,L),L.forEach(p),_=I(E),te(S.$$.fragment,E),this.h()},h:function(){b(r,"class","flex gap-3 my-8"),P(r,_t,73,1,2214),b(e,"class","mb-16 p-5"),P(e,_t,62,0,1901)},m:function(E,L){N(E,e,L),oe(t,e,null),h(e,s),h(e,r),oe(d,r,null),h(r,a),oe(i,r,null),h(e,u),oe(l,e,null),h(e,f),oe(n,e,null),h(e,g),oe(m,e,null),N(E,_,L),oe(S,E,L),C=!0},p:function(E,[L]){var me,_e,re,Y,K,X,be,ye;const B={};L&16&&(B.username=(me=E[4])==null?void 0:me.display_name),L&16&&(B.email=(_e=E[4])==null?void 0:_e.email),L&8&&(B.creationDate=(re=E[3])==null?void 0:re.metadata.creationTime),L&16&&(B.pictureURL=(Y=E[4])==null?void 0:Y.images[1].url),L&32&&(B.followers=(K=E[5])==null?void 0:K.followers),L&32&&(B.following=(X=E[5])==null?void 0:X.following),L&1&&(B.isLoading=E[0]),t.$set(B);const de={};L&2&&(de.statistic=E[1]),L&1&&(de.isLoading=E[0]),d.$set(de);const ce={};L&32&&(ce.statistic=(be=E[5])==null?void 0:be.score),L&1&&(ce.isLoading=E[0]),i.$set(ce);const he={};L&2&&(he.progress=E[1]),l.$set(he);const pe={};L&32&&(pe.progress=(ye=E[5])==null?void 0:ye.score),n.$set(pe);const W={};L&4&&(W.progress=E[2]),m.$set(W)},i:function(E){C||(M(t.$$.fragment,E),M(d.$$.fragment,E),M(i.$$.fragment,E),M(l.$$.fragment,E),M(n.$$.fragment,E),M(m.$$.fragment,E),E&&(c||qt(()=>{c=xt(e,yt,{}),c.start()})),M(S.$$.fragment,E),C=!0)},o:function(E){x(t.$$.fragment,E),x(d.$$.fragment,E),x(i.$$.fragment,E),x(l.$$.fragment,E),x(n.$$.fragment,E),x(m.$$.fragment,E),x(S.$$.fragment,E),C=!1},d:function(E){E&&(p(e),p(_)),ne(t),ne(d),ne(i),ne(l),ne(n),ne(m),ne(S,E)}};return z("SvelteRegisterBlock",{block:V,id:tt.name,type:"component",source:"",ctx:o}),V}function Yt(o,e,t){let s,r,d;Ge(Be,"user"),Je(o,Be,c=>t(3,s=c)),Ge(Le,"spotifyUser"),Je(o,Le,c=>t(4,r=c)),Ge(Ue,"userData"),Je(o,Ue,c=>t(5,d=c));let{$$slots:a={},$$scope:i}=e;Te("Page",a,[]);let u=!0,l=0,f=0;const n=async()=>{await wt("https://api.spotify.com/v1/me/").then(c=>{Le.set(c),t(0,u=!1)});try{const c=s.uid,_=Ie(we,"playedSongs"),S=je(_,Ve("userId","==",c)),C=await Ce(S);t(1,l=C.docs.length),t(0,u=!1)}catch(c){console.error("Error fetching star data:",c)}};async function g(){const c=new Set,_=Ie(we,"playedSongs"),S=je(_,Ve("userId","==",s.uid));return(await Ce(S)).forEach(V=>{const q=V.data().trackId;c.add(q)}),Array.from(c).length}Ye(()=>{n()}),Ye(async()=>{t(2,f=await g())});const m=[];return Object.keys(e).forEach(c=>{!~m.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&Jt.warn(`<Page> was created with unknown prop '${c}'`)}),o.$capture_state=()=>({Navigation:bt,ProfileStatistic:Xe,UserProfile:Rt,db:we,user:Be,userData:Ue,spotifyUser:Le,callWithRetry:wt,fetchSpotifySongs:Ft,onMount:Ye,fade:yt,collection:Ie,query:je,where:Ve,getDocs:Ce,Challenge:Me,isLoading:u,totalStars:l,playedSongs:f,fetchData:n,getUniquePlayedSongsByUser:g,$user:s,$spotifyUser:r,$userData:d}),o.$inject_state=c=>{"isLoading"in c&&t(0,u=c.isLoading),"totalStars"in c&&t(1,l=c.totalStars),"playedSongs"in c&&t(2,f=c.playedSongs)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[u,l,f,s,r,d]}class so extends xe{constructor(e){super(e),Ae(this,e,Yt,tt,Oe,{}),z("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:tt.name})}}export{so as component};
